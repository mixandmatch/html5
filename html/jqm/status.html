<!DOCTYPE HTML>
<html>
    <head>
        <title>Mix and Match mit jQuery Mobile</title>

        <script type="text/javascript" src="../../js/CommonHeaderLibs.js"></script>
		<script type="text/javascript" src="../../js/CommonHeaderInit.js"></script>

        <script type="text/javascript">
 		
            $(document).ready(function(){
        		
                var storageService = new StorageService();
                var userRequestData = storageService.getSavedUserRequestObject();
                showUserRequestObject(userRequestData);
                
				// get the lunch response
                mixAndMatch.getAllLunchRequests(showResponse);
            });
 		
            function showUserRequestObject(userRequestData){
                $('#requestData').html(
                userRequestData.name + ", " +
                    userRequestData.email + ", "+
                    userRequestData.date + ", " +
                    userRequestData.place);
            }
        
            function showResponse(responseDataArray) {
        	
                var dynamicHtml= '<ul>'
                for(var i=0;i<responseDataArray.length;i++){
                    dynamicHtml += '<li>'
                    var responseData = responseDataArray[i];
                    dynamicHtml += responseData.locationKey + ", " + responseData.date + ", " + responseData.userid;
                    dynamicHtml += '</li>'
                }
                dynamicHtml += '</ul>'
        	
                $('#responseData').html(dynamicHtml);
            }
        </script>
    </head>
    <body>

        <div data-role="page">
            <div data-role="header" data-theme="b">
                <a href="index.html" rel="external" data-role="button" data-theme="b" data-icon="arrow-l" data-iconpos="left">Back</a>
                <h1>Request Status</h1>
            </div>

            <div data-role="content">
                <div>
					Ihre letzte Anmeldung:
                </div>
                <div id="requestData">
                    <!-- will be filled by javascript -->
                </div>
                <br/>
                <div>
					Anstehende Verabredungen:
                </div>
                <div id="responseData">
                    <!-- will be filled by javascript -->
                </div>
            </div>

            <div data-role="footer">
                <h4>HTML5-Team</h4>
            </div>
        </div>
    </body>
</html>